{% macro main_toolbar() -%}
<header>
  <div class="container clearfix">
    {{ caller() }}

    <div class="right">
      <ul class="notification">
      {% for message in messages %}
        <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
      {% endfor %}
      </ul>
      <span id="loading" class="fa fa-refresh fa-spin"></span>

      <!-- Profile -->
      <div id="profile" class="select">
        <div class="button selector">
          <span class="title noselect">{% if user.first_name %}{{ user.first_name }}{% elif user.email %}{{ user.email }}{% else %}Anonymous{% endif %}<span class="fa fa-chevron-down"></span></span>
          <img class="rounded" src="{% if gravatar_url %}{{ gravatar_url }}{% else %}{{ static('img/anonymous.jpg') }}{% endif %}">
        </div>
        <div class="menu">
          <ul>
            {% if user.is_authenticated() %}
            <li data-url="{{ url('pontoon.contributor', user.email) }}"><i class="fa fa-user fa-fw"></i>View profile</li>
            <li class="quality-checks{% if user.get_profile().quality_checks %} enabled{% endif %}"><i class="fa fa-fw"></i>Quality checks</li>
            <li class="horizontal-separator"></li>
            {% endif %}

            {% if project %}
              <li class="download">Download
                {% if user.is_authenticated() and project.repository_path and project.repository_type != 'file' %}<i class="file-format zip">ZIP</i>{% endif %}
                {% if project.url %}<i class="file-format html">HTML</i>{% endif %}
                <i class="file-format json">JSON</i>
              </li>
            {% endif %}

            <li class="horizontal-separator"></li>

            <li data-url="{{ url('pontoon.projects') }}"><i class="fa fa-bar-chart-o fa-fw"></i>Project Overview</a></li>
            <li data-url="{{ url('pontoon.contributors') }}"><i class="fa fa-trophy fa-fw"></i>Top Contributors</a></li>
            <li data-url="https://developer.mozilla.org/en-US/docs/Localizing_with_Pontoon"><i class="fa fa-life-ring fa-fw"></i>Help</a></li>
            <li data-url="https://developer.mozilla.org/en-US/docs/Implementing_Pontoon_Mozilla"><i class="fa fa-wrench fa-fw"></i>Developers</a></li>
            <li class="hotkeys"><i class="fa fa-keyboard-o fa-fw"></i>Keyboard shortcuts</li>

            <li class="horizontal-separator"></li>

            {% if perms.base.can_manage %}
              <li data-url="{{ url('pontoon.admin') }}"></i>Admin</li>
              {% if project %}
                <li data-url="{{ url('pontoon.admin.project', project.slug) }}"></i>Admin &middot; Current project</li>
              {% endif %}
            {% endif %}

            {% if user.is_authenticated() %}
            <li class="sign-out"><i class="fa fa-sign-out fa-fw"></i>Sign out</li>
            {% else %}
            <li class="sign-in"><i class="fa fa-sign-in fa-fw"></i>Sign in</li>
            {% endif %}

          </ul>
        </div>

        <!-- Keyboard shortcuts -->
        <aside id="hotkeys" class="popup">
          <h2>Keyboard shortcuts</h2>
          <table>
            <tbody>
              <tr>
                <td>Save translation</td>
                <td><span>Enter</span></td>
              </tr>
              <tr>
                <td>Cancel translation</td>
                <td><span>Esc</span></td>
              </tr>
              <tr>
                <td>Insert a new line</td>
                <td><span>Shift</span>&nbsp;+&nbsp;<span>Enter</span></td>
              </tr>
              <tr>
                <td>Copy from source</td>
                <td><span>Alt</span>&nbsp;+&nbsp;<span>C</span></td>
              </tr>
              <tr>
                <td>Clear translation</td>
                <td><span>Alt</span>&nbsp;+&nbsp;<span>Backspace</span></td>
              </tr>
              <tr>
                <td>Next string</td>
                <td><span>Alt</span>&nbsp;+&nbsp;<span>Down</span></td>
              </tr>
              <tr>
                <td>Previous string</td>
                <td><span>Alt</span>&nbsp;+&nbsp;<span>Up</span></td>
              </tr>
              <tr>
                <td>Search strings</td>
                <td><span>Alt</span>&nbsp;+&nbsp;<span>F</span></td>
              </tr>
              <tr>
                <td>Select suggestions</td>
                <td><span>Tab</span></td>
              </tr>
            </tbody>
          </table>
        </aside>
      </div>
    </div>
  </div>
</header>
{%- endmacro %}
